浏览器中的网络流程，页面渲染的流程，js执行的流程，web安全

浏览器的多进程架构

# 进程和线程
并行处理 能大大提升性能

多线程可以并行处理任务，但是线程是不能单独存在的，它是由进程来启动和管理的

# 进程
一个进程是一个程序的运行实例，操作系统为一个程序创建一个内存，用来存放代码、运行中的数据和一个执行任务的主线程，这样的一个运行环境叫进程

线程是依附进程的

1. 进程中的任意一个线程执行出错，都会导致整个进程的崩溃
2. 线程之间是可以共享进程中的数据
3. 当一个进程关闭之后，操作系统会回收进程所占用的内存
4. 进程之间的内容是相互隔离的，需要的话进程之间通信机制（IPC）

# 单进程浏览器
1. 不稳定：早期浏览器需要借助插件来实现例如web视频的功能，插件是最容易出问题的，因为插件要运行在浏览器的进程中，所以一个插件意外崩溃会引起整个浏览器崩溃

2. 不流畅：所以页面的渲染模块，js执行环境及插件都运行在一个线程中，意味着同一个时间只能有一个模块可以执行

3. 不安全：插件可以用C/C++编写，通过插件可以获取到操作系统的任意资源

# 多进程浏览器
解决不稳定问题：因为进程是相互隔离的，当一个插件崩溃的时候，仅仅是当前的页面进程受影响

解决不流畅问题：js也是运行在渲染进程中的，所以即使js阻塞渲染进程，也只是影响当前页面

解决不安全问题：把插件进程和渲染进程所在操作系统的安全沙箱里运行，沙箱里的程序是不能读写硬盘数据的

# 目前的浏览器
五个进程：一个主进程，一个GPU进程，一个网络进程，多个渲染进程，多个插件进程

主进程：负责页面显示，用户交互，子进程管理，提供存储等功能

渲染进程：把HTML，CSS，JS转换成页面

GPU进程：绘制动画UI界面

网络进程：主要负责页面的网络资源加载

插件进程：负责插件的运行，会因为插件易崩溃，所以需要单独的进程来隔离

# 面向服务架构
高内聚，低耦合，易维护，易扩展